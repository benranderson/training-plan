{% extends "base.html" %}

{% import "bootstrap/utils.html" as utils %}

{% block styles -%}
    {{super()}}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.css" rel="stylesheet"/>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css' rel='stylesheet' />
{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>    
    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month, basicWeek, listMonth, listWeek'
                },
                editable: true,
                eventLimit: true, // allow "more" link when too many events
                events: {url: 'data'},
                firstDay: 1,
                eventClick: function(event){
                    $("#eventInfo").html(event.description);
                    $("#eventContent").dialog({
                        modal: true,
                        title: event.title
                    });
                },         
            });
        });
    </script>
{% endblock %}

{% block content %}
<body>
    <div class="container">
        <div class="jumbotron">
            <h1>Training Plan  <i class="mdi mdi-run-fast"></i></h1>
        </div>
        <div>
            <p><a href="{{ url_for('main.index') }}"><button type="button" class="btn btn-default btn-block">Back</button></a></p>
        </div>
        <div>
            <br>
            <p class="sum"><b>{{ plan.length }}</b> week <b>{{ plan.level }}</b> plan for the <b>{{ plan.event_title }}</b> on {{ plan.event_date }}!</p>
            <br>
        </div>
        <div id="eventContent" title="Event Details">
            <h4>Workout</h4>
            <p id="eventInfo"></p>
        </div>
        <div>
            <p><div id='calendar'></div></p>
        </div>
        <br>
    </div>
</body>
{% endblock %}
